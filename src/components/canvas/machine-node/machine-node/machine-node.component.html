<div
  class="absolute w-36 h-32 bg-slate-50 rounded-xl border-2 border-slate-200
         shadow-md hover:border-primary/50 hover:shadow-lg transition-all
         cursor-grab select-none"

  [style.left.px]="machine.x"
  [style.top.px]="machine.y"

  appDraggable
  appSelectable
  (dragEnd)="onDragEnd($event)"
>

  <!-- HEADER -->
  <div
    class="h-8 bg-slate-100 rounded-t-[10px] border-b border-slate-200
           flex items-center justify-between px-3">
    <span class="text-xs font-bold text-slate-500 tracking-wider">
      {{ machine.id }}
    </span>
    <div 
      class="w-2 h-2 rounded-full animate-pulse"
      [ngClass]="getStatusColor()">
    </div>
  </div>

  <!-- BODY -->
  <div class="flex-1 flex flex-col items-center justify-center p-2">

    <!-- MACHINE ICON -->
    <div class="mb-2">
      <svg 
        class="w-10 h-10 text-slate-600" 
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24">
        <path 
          stroke-linecap="round" 
          stroke-linejoin="round" 
          stroke-width="2" 
          d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z">
        </path>
      </svg>
    </div>

    <span 
      class="text-[10px] font-semibold uppercase tracking-wide"
      [ngClass]="{
        'text-green-600': machine.status === 'idle',
        'text-blue-600': machine.status === 'processing',
        'text-red-600': machine.status === 'error'
      }">
      {{ getStatusText() }}
    </span>

    <span 
      *ngIf="machine.currentTask" 
      class="text-[9px] text-slate-400 mt-1 truncate max-w-[90%]">
      {{ machine.currentTask }}
    </span>
  </div>

  <!-- CONNECTOR -->
  <div
    class="absolute top-1/2 -left-1.5 w-3 h-3 bg-white
           border-2 border-slate-400 rounded-full">
  </div>

</div>